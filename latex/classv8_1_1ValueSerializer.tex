\hypertarget{classv8_1_1ValueSerializer}{}\section{v8\+:\+:Value\+Serializer Class Reference}
\label{classv8_1_1ValueSerializer}\index{v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}}


{\ttfamily \#include $<$v8.\+h$>$}

\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate}{Delegate}}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classv8_1_1ValueSerializer_a51d1b6f00c48dc3577baeeaa3bdbaf09}\label{classv8_1_1ValueSerializer_a51d1b6f00c48dc3577baeeaa3bdbaf09}} 
{\bfseries Value\+Serializer} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\Hypertarget{classv8_1_1ValueSerializer_a5f37e7f6087acda9a943fb50216e0895}\label{classv8_1_1ValueSerializer_a5f37e7f6087acda9a943fb50216e0895}} 
{\bfseries Value\+Serializer} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate}{Delegate}} $\ast$delegate)
\item 
void \mbox{\hyperlink{classv8_1_1ValueSerializer_ac0bdf1a7731ee4e93823dabdfa8c8661}{Write\+Header}} ()
\item 
V8\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ bool $>$ \mbox{\hyperlink{classv8_1_1ValueSerializer_a32b08083cb7d83bf3b117b61f327ea23}{Write\+Value}} (\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Context}{Context}} $>$ context, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$ value)
\item 
\mbox{\hyperlink{classv8_1_1ValueSerializer_a2db107206f6f7965eb17c170cecfafaf}{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON}} (\char`\"{}Use \mbox{\hyperlink{classv8_1_1ValueSerializer_abab0c48c963cd11f98478a4ccc04509c}{Release}}()\char`\"{}, std\+::vector$<$ uint8\+\_\+t $>$ Release\+Buffer())
\item 
V8\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT std\+::pair$<$ uint8\+\_\+t $\ast$, size\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1ValueSerializer_abab0c48c963cd11f98478a4ccc04509c}{Release}} ()
\item 
void \mbox{\hyperlink{classv8_1_1ValueSerializer_a27007f2530a496275ccf7b8846f1d9c5}{Transfer\+Array\+Buffer}} (uint32\+\_\+t transfer\+\_\+id, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1ArrayBuffer}{Array\+Buffer}} $>$ array\+\_\+buffer)
\item 
\mbox{\hyperlink{classv8_1_1ValueSerializer_a2cd82786e44182adee305f71be57019c}{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON}} (\char`\"{}Use \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a963946ef185d992552e8d9e0e4016137}{Delegate\+::\+Get\+Shared\+Array\+Buffer\+Id}}\char`\"{}, void Transfer\+Shared\+Array\+Buffer(uint32\+\_\+t transfer\+\_\+id, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} $>$ shared\+\_\+array\+\_\+buffer))
\item 
void \mbox{\hyperlink{classv8_1_1ValueSerializer_ae5e570983dfe928e15d6cc56755248c4}{Set\+Treat\+Array\+Buffer\+Views\+As\+Host\+Objects}} (bool mode)
\item 
void \mbox{\hyperlink{classv8_1_1ValueSerializer_a8345af97eb58727384cab6a2738924d1}{Write\+Uint32}} (uint32\+\_\+t value)
\item 
\mbox{\Hypertarget{classv8_1_1ValueSerializer_a48a33b02dc8dd383be655e5627c0a070}\label{classv8_1_1ValueSerializer_a48a33b02dc8dd383be655e5627c0a070}} 
void {\bfseries Write\+Uint64} (uint64\+\_\+t value)
\item 
\mbox{\Hypertarget{classv8_1_1ValueSerializer_a4da99527143807156385004385e98ed8}\label{classv8_1_1ValueSerializer_a4da99527143807156385004385e98ed8}} 
void {\bfseries Write\+Double} (double value)
\item 
\mbox{\Hypertarget{classv8_1_1ValueSerializer_ae01d5c86517fad7ad1c191b9ff6c30e7}\label{classv8_1_1ValueSerializer_ae01d5c86517fad7ad1c191b9ff6c30e7}} 
void {\bfseries Write\+Raw\+Bytes} (const void $\ast$source, size\+\_\+t length)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\mbox{\hyperlink{classv8_1_1Value}{Value}} serialization compatible with the H\+T\+ML structured clone algorithm. The format is backward-\/compatible (i.\+e. safe to store to disk).

W\+A\+R\+N\+I\+NG\+: This A\+PI is under development, and changes (including incompatible changes to the A\+PI or wire format) may occur without notice until this warning is removed. 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1ValueSerializer_abab0c48c963cd11f98478a4ccc04509c}\label{classv8_1_1ValueSerializer_abab0c48c963cd11f98478a4ccc04509c}} 
\index{v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}!Release@{Release}}
\index{Release@{Release}!v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}}
\subsubsection{\texorpdfstring{Release()}{Release()}}
{\footnotesize\ttfamily V8\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT std\+::pair$<$uint8\+\_\+t$\ast$, size\+\_\+t$>$ v8\+::\+Value\+Serializer\+::\+Release (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Returns the stored data (allocated using the delegate\textquotesingle{}s Reallocate\+Buffer\+Memory) and its size. This serializer should not be used once the buffer is released. The contents are undefined if a previous write has failed. Ownership of the buffer is transferred to the caller. \mbox{\Hypertarget{classv8_1_1ValueSerializer_ae5e570983dfe928e15d6cc56755248c4}\label{classv8_1_1ValueSerializer_ae5e570983dfe928e15d6cc56755248c4}} 
\index{v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}!Set\+Treat\+Array\+Buffer\+Views\+As\+Host\+Objects@{Set\+Treat\+Array\+Buffer\+Views\+As\+Host\+Objects}}
\index{Set\+Treat\+Array\+Buffer\+Views\+As\+Host\+Objects@{Set\+Treat\+Array\+Buffer\+Views\+As\+Host\+Objects}!v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}}
\subsubsection{\texorpdfstring{Set\+Treat\+Array\+Buffer\+Views\+As\+Host\+Objects()}{SetTreatArrayBufferViewsAsHostObjects()}}
{\footnotesize\ttfamily void v8\+::\+Value\+Serializer\+::\+Set\+Treat\+Array\+Buffer\+Views\+As\+Host\+Objects (\begin{DoxyParamCaption}\item[{bool}]{mode }\end{DoxyParamCaption})}

Indicate whether to treat \mbox{\hyperlink{classv8_1_1ArrayBufferView}{Array\+Buffer\+View}} objects as host objects, i.\+e. pass them to \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_ae97808060b22d7a94517f725922b72c6}{Delegate\+::\+Write\+Host\+Object}}. This should not be called when no \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate}{Delegate}} was passed.

The default is not to treat Array\+Buffer\+Views as host objects. \mbox{\Hypertarget{classv8_1_1ValueSerializer_a27007f2530a496275ccf7b8846f1d9c5}\label{classv8_1_1ValueSerializer_a27007f2530a496275ccf7b8846f1d9c5}} 
\index{v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}!Transfer\+Array\+Buffer@{Transfer\+Array\+Buffer}}
\index{Transfer\+Array\+Buffer@{Transfer\+Array\+Buffer}!v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}}
\subsubsection{\texorpdfstring{Transfer\+Array\+Buffer()}{TransferArrayBuffer()}}
{\footnotesize\ttfamily void v8\+::\+Value\+Serializer\+::\+Transfer\+Array\+Buffer (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{transfer\+\_\+id,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1ArrayBuffer}{Array\+Buffer}} $>$}]{array\+\_\+buffer }\end{DoxyParamCaption})}

Marks an \mbox{\hyperlink{classv8_1_1ArrayBuffer}{Array\+Buffer}} as havings its contents transferred out of band. Pass the corresponding \mbox{\hyperlink{classv8_1_1ArrayBuffer}{Array\+Buffer}} in the deserializing context to \mbox{\hyperlink{classv8_1_1ValueDeserializer_a853acc2c7b30571d6719ddd92a48da3b}{Value\+Deserializer\+::\+Transfer\+Array\+Buffer}}. \mbox{\Hypertarget{classv8_1_1ValueSerializer_a2db107206f6f7965eb17c170cecfafaf}\label{classv8_1_1ValueSerializer_a2db107206f6f7965eb17c170cecfafaf}} 
\index{v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}!V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON@{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON}}
\index{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON@{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON}!v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}}
\subsubsection{\texorpdfstring{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+O\+N()}{V8\_DEPRECATE\_SOON()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily v8\+::\+Value\+Serializer\+::\+V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON (\begin{DoxyParamCaption}\item[{\char`\"{}Use \mbox{\hyperlink{classv8_1_1ValueSerializer_abab0c48c963cd11f98478a4ccc04509c}{Release}}()\char`\"{}}]{,  }\item[{std\+::vector$<$ uint8\+\_\+t $>$ }]{Release\+Buffer() }\end{DoxyParamCaption})}

Returns the stored data. This serializer should not be used once the buffer is released. The contents are undefined if a previous write has failed. \mbox{\Hypertarget{classv8_1_1ValueSerializer_a2cd82786e44182adee305f71be57019c}\label{classv8_1_1ValueSerializer_a2cd82786e44182adee305f71be57019c}} 
\index{v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}!V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON@{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON}}
\index{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON@{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON}!v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}}
\subsubsection{\texorpdfstring{V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+O\+N()}{V8\_DEPRECATE\_SOON()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily v8\+::\+Value\+Serializer\+::\+V8\+\_\+\+D\+E\+P\+R\+E\+C\+A\+T\+E\+\_\+\+S\+O\+ON (\begin{DoxyParamCaption}\item[{\char`\"{}Use \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a963946ef185d992552e8d9e0e4016137}{Delegate\+::\+Get\+Shared\+Array\+Buffer\+Id}}\char`\"{}}]{,  }\item[{void }]{Transfer\+Shared\+Array\+Bufferuint32\+\_\+t transfer\+\_\+id, Local$<$ Shared\+Array\+Buffer $>$ shared\+\_\+array\+\_\+buffer }\end{DoxyParamCaption})}

Similar to Transfer\+Array\+Buffer, but for \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}}. \mbox{\Hypertarget{classv8_1_1ValueSerializer_ac0bdf1a7731ee4e93823dabdfa8c8661}\label{classv8_1_1ValueSerializer_ac0bdf1a7731ee4e93823dabdfa8c8661}} 
\index{v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}!Write\+Header@{Write\+Header}}
\index{Write\+Header@{Write\+Header}!v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}}
\subsubsection{\texorpdfstring{Write\+Header()}{WriteHeader()}}
{\footnotesize\ttfamily void v8\+::\+Value\+Serializer\+::\+Write\+Header (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Writes out a header, which includes the format version. \mbox{\Hypertarget{classv8_1_1ValueSerializer_a8345af97eb58727384cab6a2738924d1}\label{classv8_1_1ValueSerializer_a8345af97eb58727384cab6a2738924d1}} 
\index{v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}!Write\+Uint32@{Write\+Uint32}}
\index{Write\+Uint32@{Write\+Uint32}!v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}}
\subsubsection{\texorpdfstring{Write\+Uint32()}{WriteUint32()}}
{\footnotesize\ttfamily void v8\+::\+Value\+Serializer\+::\+Write\+Uint32 (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{value }\end{DoxyParamCaption})}

Write raw data in various common formats to the buffer. Note that integer types are written in base-\/128 varint format, not with a binary copy. For use during an override of \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_ae97808060b22d7a94517f725922b72c6}{Delegate\+::\+Write\+Host\+Object}}. \mbox{\Hypertarget{classv8_1_1ValueSerializer_a32b08083cb7d83bf3b117b61f327ea23}\label{classv8_1_1ValueSerializer_a32b08083cb7d83bf3b117b61f327ea23}} 
\index{v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}!Write\+Value@{Write\+Value}}
\index{Write\+Value@{Write\+Value}!v8\+::\+Value\+Serializer@{v8\+::\+Value\+Serializer}}
\subsubsection{\texorpdfstring{Write\+Value()}{WriteValue()}}
{\footnotesize\ttfamily V8\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$bool$>$ v8\+::\+Value\+Serializer\+::\+Write\+Value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Context}{Context}} $>$}]{context,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$}]{value }\end{DoxyParamCaption})}

Serializes a Java\+Script value into the buffer. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
v8/include/v8.\+h\end{DoxyCompactItemize}
